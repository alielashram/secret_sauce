<!DOCTYPE html>
<html>

<head>
  <title> DECODER </title>
</head>

<body>
  <h1> Get Ready to Decode </h1>
  <h4> Get set. Go! </h4></br>

  <p> Please decode responsibly </p>

  <button id="decrypt">DECODE</button>

<script#src="src/decoder.js"></script>
<script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/aes.js"></script>

<script "text/javascript">
  var decoder = {
    run: function() {
      console.log("here");
      this.keyGrabber();
      this.message();
      alert(this.decrypted);
    },
    keyGrabber: function (){
      console.log("In the Decoder");
      this.encrypted = document.URL.split("?")[1];
      console.log(this.encrypted);
    },
    message: function(){
      this.password = prompt("Enter your Decoder Password: ");
      console.log("password is:");
      console.log(this.password);

      this.decrypted = CryptoJS.AES.decrypt(this.encrypted, this.password).toString(CryptoJS.enc.Utf8);
      console.log("decoded string is:");
      console.log(this.decrypted);
    }
  }
  document.getElementById('decrypt').onclick = function() { decoder.run() }
  </script>
</body>
